@tailwind base;
@tailwind components;
@tailwind utilities;

/* Import font size scaling */
@import './font-size.css';

/* Custom animations for task operations */

/* Fade-out animation for disappearing elements (for deleted tasks) */
@keyframes fadeOut {
  from { opacity: 1; transform: translateY(0); }
  to { opacity: 0; transform: translateY(-20px); }
}

.fade-out {
  animation: fadeOut 0.3s ease-out forwards;
}

/* Manual fade-in animation in addition to Tailwind's */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

.animated.fadeIn {
  animation: fadeIn 0.3s ease-out forwards;
}

/* Status change flash effect */
@keyframes statusChangeFlash {
  0% { background-color: inherit; }
  30% { background-color: rgba(219, 234, 254, 0.8); } /* Light blue flash */
  100% { background-color: inherit; }
}

.status-change-flash {
  animation: statusChangeFlash 0.5s ease-out;
}

/* Fix for staggered animations */
.task-card-container {
  transform-origin: center top;
  position: relative;
  z-index: 1; /* Establish a stacking context */
}

/* Ensure task cards have proper stacking context and position */
.task-card {
  position: relative; 
  z-index: 1;
}

/* Ensure task cards in expanded state have higher z-index */
.task-card.expanded {
  z-index: 10;
}

@layer base {
  body {
    @apply bg-gray-100 text-gray-900 font-sans;
  }

  h1 {
    @apply text-3xl font-semibold tracking-tight;
  }

  h2 {
    @apply text-2xl font-semibold tracking-tight;
  }

  h3 {
    @apply text-xl font-medium tracking-tight;
  }
  
  /* Anthropic-like typography */
  .font-anthropic {
    @apply font-sans tracking-tight;
  }
}

@layer components {
  /* Add styling for the prose class to make markdown look good */
  .prose {
    @apply text-gray-700 max-w-none;
  }

  .prose h1 {
    @apply text-2xl font-bold mb-4 mt-6;
  }

  .prose h2 {
    @apply text-xl font-bold mb-3 mt-5;
  }

  .prose h3 {
    @apply text-lg font-bold mb-2 mt-4;
  }

  .prose p {
    @apply mb-4;
  }

  .prose ul {
    @apply list-disc pl-6 mb-4;
  }

  .prose ol {
    @apply list-decimal pl-6 mb-4;
  }

  .prose li {
    @apply mb-1;
  }

  .prose code {
    @apply bg-gray-100 px-1 rounded font-mono text-sm;
  }

  .prose pre {
    @apply bg-gray-100 p-3 rounded mb-4 overflow-auto;
  }

  .prose a {
    @apply text-blue-600 underline;
  }

  .prose blockquote {
    @apply border-l-4 border-gray-300 pl-4 italic my-4;
  }

  .prose hr {
    @apply my-6 border-gray-300;
  }

  .btn {
    @apply px-5 py-2 rounded-md transition-all duration-200;
  }
  .btn:hover {
    @apply transform -translate-y-0.5 shadow-md;
  }
  .btn:active {
    @apply transform translate-y-0 shadow-sm;
  }
  
  .btn-primary {
    @apply bg-primary-600 text-white;
  }
  .btn-primary:hover {
    @apply bg-primary-700;
  }
  
  .btn-secondary {
    @apply bg-gray-200 text-gray-800;
  }
  .btn-secondary:hover {
    @apply bg-gray-300;
  }
  
  .task-card {
    @apply border border-gray-200 rounded-lg shadow-sm bg-white mb-4 transition-all duration-200 overflow-hidden;
  }
  .task-card:hover {
    @apply shadow-md transform -translate-y-0.5;
  }
  
  .badge {
    @apply text-xs px-3 py-1 rounded font-medium;
  }
  
  .badge-todo {
    @apply bg-blue-100 text-blue-800;
  }
  
  .badge-done {
    @apply bg-green-100 text-green-800;
  }
  
  .badge-tested {
    @apply bg-purple-100 text-purple-800;
  }
  
  /* Outline buttons */
  .btn-outline {
    @apply px-3.5 py-1.5 rounded-md text-sm font-medium border transition-colors flex items-center;
  }
  
  .btn-outline-primary {
    @apply btn-outline border-blue-500 text-blue-700 hover:bg-blue-50;
  }
  
  .btn-outline-secondary {
    @apply btn-outline border-gray-400 text-gray-600 hover:bg-gray-50;
  }
  
  .btn-outline-success {
    @apply btn-outline border-green-500 text-green-700 hover:bg-green-50;
  }
  
  .btn-outline-danger {
    @apply btn-outline border-red-500 text-red-700 hover:bg-red-50;
  }
  
  /* Icon buttons */
  .btn-icon {
    @apply p-2.5 rounded-md text-gray-500 hover:text-gray-700 hover:bg-gray-100 transition-colors flex items-center justify-center;
  }
  
  /* Popover styles */
  .popover {
    @apply invisible absolute z-[2000] max-w-sm rounded-md bg-white p-3 text-sm shadow-lg ring-1 ring-gray-200 transition-all duration-150 opacity-0 transform scale-95;
  }
  
  .popover.show {
    @apply visible opacity-100 scale-100;
  }
  
  .popover-arrow {
    @apply absolute w-3 h-3 bg-white rotate-45 transform;
  }
  
  /* Parent element for popover trigger */
  .popover-trigger {
    @apply relative;
  }
  
  .form-input {
    @apply w-full px-3.5 py-2.5 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500;
  }
  
  .form-label {
    @apply block text-sm font-medium text-gray-700 mb-1.5;
  }
  
  .form-select {
    @apply w-full px-3.5 py-2.5 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500;
  }
  
  .form-textarea {
    @apply w-full px-3.5 py-2.5 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500;
  }
}